<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Open for a Little Comfort ðŸ’›</title>
  <style>
    :root {
      --bg: #0f1724;
      --accent: #6bafff;
      --muted: #a0aec0;
      --white: #f8fafc;
    }

    html,
    body {
      height: 100%;
      margin: 0;
      font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    }

    body {
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(160deg, var(--bg), #071023 60%);
      color: var(--white);
      overflow: hidden;
      transition: opacity 1.2s ease;
    }

    body.fade-out {
      opacity: 0;
      pointer-events: none;
    }

    .container {
      width: min(960px, 94vw);
      padding: 28px;
      border-radius: 14px;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.03), rgba(255, 255, 255, 0.02));
      box-shadow: 0 6px 30px rgba(2, 6, 23, 0.6);
      text-align: center;
      position: relative;
      z-index: 10;
    }

    h1 {
      font-size: clamp(22px, 3.6vw, 34px);
      margin: 0 0 10px;
    }

    p.lead {
      color: var(--muted);
      margin: 0 0 18px;
    }

    .big-btn {
      appearance: none;
      border: 0;
      padding: 16px 26px;
      border-radius: 12px;
      font-size: 18px;
      cursor: pointer;
      background: linear-gradient(90deg, var(--accent), #87cefa);
      color: white;
      box-shadow: 0 8px 20px rgba(107, 175, 255, 0.2);
      transition: transform .12s ease, background .3s ease;
    }

    .big-btn:hover {
      background: linear-gradient(90deg, #7bbcff, #9fd8ff);
    }

    .big-btn:active {
      transform: translateY(2px) scale(.997);
    }

    .hint {
      font-size: 12px;
      color: var(--muted);
      margin-top: 10px;
    }

    canvas {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 1;
    }

    /* Fade overlay */
    .fade-overlay {
      position: fixed;
      inset: 0;
      background: black;
      opacity: 0;
      z-index: 50;
      transition: opacity 1s ease;
      pointer-events: none;
    }

    .fade-overlay.show {
      opacity: 1;
    }
  </style>
</head>

<body>
  <canvas id="confetti"></canvas>

  <div class="container">
    <h1>Open for a Little Comfort ðŸ’Œ</h1>
    <p class="lead">Something gentle and kind, just for you.</p>
    <button id="openBtn" class="big-btn" aria-expanded="false">Open Message</button>
    <div class="hint">(You can close it anytime by clicking outside.)</div>
  </div>

  <div class="fade-overlay" id="fadeOverlay"></div>

  <script>
    // ðŸŒˆ Confetti Setup
    const canvas = document.getElementById('confetti');
    const ctx = canvas.getContext('2d');
    let W, H, particles = [], raf, confettiRunning = false;

    function resizeCanvas() {
      W = canvas.width = window.innerWidth;
      H = canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeCanvas, { passive: true });
    resizeCanvas();

    function rand(min, max) {
      return Math.random() * (max - min) + min;
    }

    function spawnConfetti(count = 120) {
      particles = [];
      const colors = ["#6bafff", "#9b79ff", "#fbc531", "#ff9a6b", "#06d6a0", "#ff6b6b"];
      for (let i = 0; i < count; i++) {
        particles.push({
          x: rand(0, W),
          y: rand(-H * 0.6, 0),
          w: rand(6, 14),
          h: rand(8, 18),
          vx: rand(-2.5, 2.5),
          vy: rand(2, 6),
          rot: rand(0, 360),
          rotSpeed: rand(-8, 8),
          color: colors[Math.floor(rand(0, colors.length))],
          ttl: rand(220, 420)
        });
      }
    }

    function draw() {
      ctx.clearRect(0, 0, W, H);
      for (let p of particles) {
        p.x += p.vx;
        p.y += p.vy;
        p.rot += p.rotSpeed * 0.03;
        p.vy += 0.03;
        p.ttl--;
        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.rot * Math.PI / 180);
        ctx.fillStyle = p.color;
        ctx.fillRect(-p.w / 2, -p.h / 2, p.w, p.h);
        ctx.restore();
      }
      particles = particles.filter(p => p.ttl > 0 && p.y < H + 200);
      if (particles.length === 0) stopConfetti();
      else raf = requestAnimationFrame(draw);
    }

    function startConfetti() {
      if (confettiRunning) return;
      confettiRunning = true;
      spawnConfetti();
      draw();
    }

    function stopConfetti() {
      confettiRunning = false;
      if (raf) cancelAnimationFrame(raf);
      setTimeout(() => ctx.clearRect(0, 0, W, H), 100);
    }

    // ðŸ’Œ Smooth Transition Logic
    const openBtn = document.getElementById('openBtn');
    const fadeOverlay = document.getElementById('fadeOverlay');

    openBtn.addEventListener('click', () => {
      startConfetti();

      // Delay confetti end and fade
      setTimeout(() => {
        fadeOverlay.classList.add('show'); // fade to black
        document.body.classList.add('fade-out');

        // After fade completes, redirect
        setTimeout(() => {
          window.location.href = "message.html";
        }, 1000);
      }, 1200); // confetti duration before fade
    });
  </script>
</body>

</html>